<div id="main" data-ng-controller="ClientsIndexCtrl" class="pure-form pure-u">
  <div class="content header pure-u-1">
    <h2 class="no-bottom-margin">Search Clients</h2>
    <%= render :partial => 'templates/breadcrumbs',
               :locals => { :paths => {
          "Home" => "#/",
          "Clients" => "#/clients/",
          "Search Clients" => "#/clients/index",
        }}
     %>
  </div>
  <hr class="soften" />

  <div class="content">
    <div class="client-search">
      <div class="search-client-form">
        <div class="form-nav">
          <div class="search well" scroll-fix scroll-fix-condition="screen and (min-width:1200px)">
            <div class="search-controls">
              <input id="search" type="text" class="pure-input" placeholder="Name, email, or company" autocomplete="off" data-ng-model="query">
              <% # TODO: This is too poorly done for now. We should come back to it. %>
              <% #<i class="icon-spinner icon-spin spinner" data-ng-class="loading && 'loading'"></i> %>
              <button id="btnSearch" class="pure-button pure-button-small pure-button-primary">
                <i class="icon-search"></i>
              </button>
            </div>
            <div class="advanced-search" advanced-search>
              <div class="advanced-search-inner">
                <hr class="soften" />
                <div class="advanced-search-fields">
                  <div class="advanced-search-field">
                    <%= label_tag 'name', 'Name' %>
                    <%= text_field_tag 'name', nil, :placeholder => 'First name, last name, etc.', :data => {:ng_model => 'filter.name'} %>
                  </div>
                  <div class="advanced-search-field">
                    <%= label_tag 'emailAddress', 'Email' %>
                    <%= text_field_tag 'emailAddress', nil, :placeholder => 'Email address', :data => {:ng_model => 'filter.emailAddress'} %>
                  </div>
                  <div class="advanced-search-field">
                    <%= label_tag 'company', 'Company' %>
                    <%= text_field_tag 'company', nil, :placeholder => 'Company', :data => {:ng_model => 'filter.company'} %>
                  </div>
                </div>
                <a href="" class="pretty advanced-search-btn">Advanced Search <i class="icon-caret-down"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="form-content">
          <%= render :partial => 'templates/action_table',
                     :locals => {
                       :name => 'clients',
                       :model => 'clients',
                       :infiniteScroll => 'updateResults(true)',
                       :rowhref => '#/clients/show/{{ item.id }}',
                       :fields => [
                         {
                           :name => 'Name',
                           :class => 'name',
                           :content => '{{ item.name.value }}'
                         },
                         {
                           :name => 'Company',
                           :class => 'company',
                           :content => '{{ item.company.value }}'
                         }
                       ],
                       :actions => [
                         {
                           :class => 'pure-button-success',
                           :icon => 'icon-share-alt',
                           :href => '#/clients/show/{{ item.id }}',
                         }
                       ]
                     } %>
        </div>
      </div>
    </div>
  </div>
</div>
