<table class="document-table pure-table pure-table-horizontal pure-table-full-width">
  <thead>
    <tr>
      <th class="name">Description</th>
      <th class="actions align-right">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr data-ng-show="historyLoading">
      <td colspan="2"><i class="icon-spinner icon-spin icon-large"></i> Loading...</td>
    </tr>
    <tr data-ng-show="!historyLoading && historyError">
      <td colspan="2">Must be online to view edit history.</td>
    </tr>
    <tr data-ng-show="!historyLoading && !historyError && !history.length">
      <td colspan="2">No edit history available.</td>
    </tr>
    <tr data-ng-repeat="item in history<%= %(.slice(0, #{limit})) if !local_assigns[:limit].nil? %>">
      <td class="description">
        {{ item.description | ellipsize: 40:1 }}
        <div class="detail">
          <% if local_assigns[:main_page] %>
            on client <a data-ng-href="#/clients/show/{{ item.client_id }}" class="pretty">{{ item.client_name }}</a>
          <% end %>
          by <a data-ng-href="#/clients/show/{{ item.user_id }}" class="email">{{ item.user_email }}</a>
          <span class="<%= !local_assigns[:main_page] && 'except-desktops' %>"><br /></span>
          on <span class="date">{{ item.updated_at | date: 'medium'}}</span>
        </div>
      </td>
      <td class="actions align-right">
        <% if !local_assigns[:main_page] %>
          <a data-ng-href="#modalAddgenDocument" modal-toggle data-ng-click="setClientChange(item)"
             class="pure-button pure-button-small pure-button-primary">
            <i class="icon-file icon-large"></i>
          </a>
        <% end %>
        <a data-ng-href="#/clients/edit/change/{{ item.id }}" class="pure-button pure-button-small pure-button-success">
          <i class="icon-share-alt icon-large"></i>
        </a>
      </td>
    </tr>
  </tbody>
</table>