<% fields = Client::FIELDS.detect{|f| f[:id] == 'locations'} %>
<% fields = fields[:type] %>

<% paths = {
     "Home" => "#/",
     "Clients" => "#/clients/index",
     "{{ (clientId || savedOnce) && (client.company.value || 'Client') }}" => "{{ '#/clients/show/' + client.id }}",
     "{{ clientChangeId ? 'History' : 'Details' }}" => "#/clients/{{ clientChangeId ? 'edit/' + clientId + '/' + clientChangeId : (clientId ? 'edit/' + clientId : 'new') }}",
     "{{ title() }}" => "#/clients/{{ clientChangeId ? 'edit/' + clientId + '/' + clientChangeId : (clientId ? 'edit/' + clientId : 'new') }}/location"
   }
 %>

<%= render :layout => 'layouts/clients/edit', :locals => {:fields => fields, :root => 'client.locations.value[locationId]', :paths => paths} do %>
  <%= render :partial => 'templates/breadcrumbs',
             :locals => { :paths => paths }
   %>
<% end %>
