<%
  schedules = [
    {
      :name => 'Property',
      :type => [
        {
          :name => 'Building, Equipment and Stock',
          :id => 'bldgEquipAndStock',
          :options => {
            'building' => 'Building',
            'equipment' => 'Equipment',
            'stock' => 'Stock',
          },
          :type => {
            'broad' => 'Broad',
            'named' => 'Named',
          },
        },
        {
          :name => 'Property of Every Description (POED)',
          :id => 'poed',
          :options => {
            'building' => 'Building',
            'equipment' => 'Equipment',
            'stock' => 'Stock',
          },
          :type => {
            'broad' => 'Broad',
            'named' => 'Named',
          },
        },
      ],
    },
  ]
%>

<div class="pure-g-r">
  <div class="pure-u-1-3">
    <select data-ng-model="coverageSchedules.category">
      <% schedules.each do |category| %>
        <option><%= category[:name] %></option>
      <% end %>
    </select>
  </div>
  <div class="pure-u-1-3">
    <% schedules.each do |category| %>
      <select data-ng-model="coverageSchedules.type" data-ng-show="coverageSchedules.category == '<%= category[:name] %>'">
        <% category[:type].each do |type| %>
          <option><%= type[:name] %></option>
        <% end %>
      </select>
    <% end %>
  </div>
  <div class="pure-u-1-3">
    <% schedules.each do |category| %>
      <% category[:type].each do |type| %>
        <% if !type[:options].nil? %>
          <%
            optionsMenu = {
              :name => '',
              :id => type[:id],
              :type => 'radio',
              :options => type[:options],
            }
           %>
          <div data-ng-show="coverageSchedules.type == '<%= type[:name] %>'">
            <%= client_field optionsMenu, parent_field: {:id => 'coverageSchedules'} %>
          </div>

          <%
            typesMenu = {
              :name => '',
              :id => type[:id],
              :type => 'radio',
              :options => type[:type],
            }
           %>
          <div data-ng-show="coverageSchedules.type == '<%= type[:name] %>'">
            <%= client_field typesMenu, parent_field: {:id => 'coverageSchedules'} %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
