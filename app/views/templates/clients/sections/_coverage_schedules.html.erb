<% sectionId = 'coverageSchedules' %>

<%
  schedules = [
    {
      :name => 'Property',
      :type => [
        {
          :name => 'Building, Equipment and Stock',
          :id => 'bldgEquipAndStock',
          :options => {
            'building' => 'Building',
            'equipment' => 'Equipment',
            'stock' => 'Stock',
          },
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Property of Every Description (POED)',
          :id => 'poed',
          :options => {
            'building' => 'Building',
            'equipment' => 'Equipment',
            'stock' => 'Stock',
          },
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Contents of Every Description (COED)',
          :id => 'COED',
          :options => {
            'equipment' => 'Equipment',
            'stock' => 'Stock',
          },
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Office Contents (Broad)',
          :id => 'officeContents',
        },
        {
          :name => 'Electronic Data Processing Systems (Broad)',
          :id => 'electronicDataProcessing',
        },
        {
          :name => 'Valuable Papers & Records (Broad)',
          :id => 'valuablePapersRecords',
        },
        {
          :name => 'Accounts Receivable (Broad)',
          :id => 'accountsReceivable',
        },
        {
          :name => 'Residential Condominiums (Broad)',
          :id => 'residentialCondominiums',
        },
        {
          :name => 'Commercial Condominiums (Broad)',
          :id => 'commercialCondominiums',
        },
        {
          :name => 'Contractor’s Equipment',
          :id => 'contractorsEquipment',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Tool Floater',
          :id => 'toolFloater',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Transportation Floater',
          :id => 'transportationFloater',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Motor Truck Cargo – Owner’s',
          :id => 'motorTruckCargoOwner',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Motor Truck Cargo – Truckmen’s',
          :id => 'motorTruckCargoTruckmen',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Trip Transit (Broad)',
          :id => 'tripTransit',
        },
        {
          :name => 'Builders Risk',
          :id => 'buildersRisk',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Installation Floater',
          :id => 'instalationFloater',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Bailees’ Customers',
          :id => 'baileesCustomers',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Warehouseman’s Legal Liability',
          :id => 'warehousemansLiability',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Equipment Dealer’s Stock and Equipment',
          :id => 'dealersStockAndEquipment',
          :options => {
            'equipment' => 'Equipment',
            'stock' => 'Stock',
          },
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Exhibition Floater',
          :id => 'exibitionFloater',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Fine Arts Floater (Broad)',
          :id => 'fineArtsFloater',
        },
        {
          :name => 'Signs Floater (Broad)',
          :id => 'signsFloater',
        },
        {
          :name => 'Misc. Property Floater',
          :id => 'miscPropertyFloater',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Furriers Block (Broad)',
          :id => 'furriersBlock',
        },
        {
          :name => 'Furriers Customers – Custody Rider (Broad)',
          :id => 'furriersCustomersCustody',
        },
        {
          :name => 'Furriers Customers – Legal Liability Rider (Broad)',
          :id => 'furriersCustomersLiability',
        },
        {
          :name => 'Jewellers Block (Broad)',
          :id => 'jewellersBlock',
        },
        {
          :name => 'Heavy Equipment in Use',
          :id => 'heavyEquipmentInUse',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Small Equipment in Use',
          :id => 'smallEquipmentInUse',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Real Property',
          :id => 'realProperty',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Other Transportation',
          :id => 'otherTransport',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Other Bailees Floater',
          :id => 'otherBaileesFloater',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Installment Sales Floater',
          :id => 'installmentSalesFloater',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Other Sales Operations',
          :id => 'otherSalesOperations',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Other Construction',
          :id => 'otherConstruction',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Difference in Conditions',
          :id => 'differenceInConditions',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Other Misc. Floaters',
          :id => 'otherMiscFloaters',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Misc. Wording (Broad)',
          :id => 'miscWordingBroad',
        },
        {
          :name => 'Misc. Wording (Named)',
          :id => 'MiscWordingNamed',
        },
      ],
    },
    {
      :name => 'Business Income',
      :type => [
        {
          :name => 'Business Income',
          :id =>'businessIncome',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Extended Business Income',
          :id =>'extendedBusinessIncome',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Rental Income',
          :id =>'rentalIncome',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Extended Rental Income',
          :id =>'extendedRentalIncome',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Extra Expense',
          :id =>'extraExpense',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
      ],
    },
    {
      :name => 'Business Interruption',
      :type => [
        {
          :name => 'Profits (Broad/Named)',
          :id => 'profits',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Gross Earnings–Mercantile or Non-Manufacturing ',
          :id => 'GrossEMOrNM',
        },
        {
          :name => 'Gross Earnings–Manufacturing',
          :id => 'GrossEarningsManufacturing',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Earnings – No Co-Insurance',
          :id => 'EarningsNoCons',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Rent or Rental Value',
          :id => 'rentRetalValue',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Gross Rentals',
          :id => 'grossRentals',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Extra Expense',
          :id => 'extraExpense',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Other Business Interruption',
          :id => 'otherBusinessInterruption',
          :type => {
            'broad' => 'Broad Form',
            'named' => 'Named Perils',
          },
        },
        {
          :name => 'Misc. Wording (Broad)',
          :id => 'miscWordingBroad',
        },
        {
          :name => 'Misc. Wording (Named)',
          :id => 'MiscWordingNamed',
        },
      ],
    },
    {
      :name => 'Crime',
      :type => [
        {
          :name => 'Comprehensive 3 D',
          :id => 'comprehensiveThreeD',
        },
        {
          :name => 'Employee Dishonesty (Individual)',
          :id => 'employeeDishonestyIndivid',
        },
        {
          :name => 'Employee Dishonesty (Scheduled - attach)',
          :id => 'employeeDishonestySched',
          :type => {
            'named' => 'Named Perils',
            'position' => 'Position',
          },
        },
        {
          :name => 'Money & Securities',
          :id => 'moneySecurities',
          :type => {
            'broad' => 'Broad Form',
            'robbery' => 'Robbery',
          },
        },
        {
          :name => 'Money Orders & Counterfeit Paper Currency',
          :id => 'moneyOrders',
        },
        {
          :name => 'Depositors Forgery',
          :id => 'depositorsForgery',
        },
        {
          :name => 'Damage to Building by Burglary or Robbery',
          :id => 'dammageBuild',
        },
        {
          :name => 'Stock & Equipment Burglary',
          :id => 'sAndEBurglary',
        },
        {
          :name => 'Safe Burglary',
          :id => 'safeBurglary',
        },
        {
          :name => 'Safe Deposit Box Burglary & Robbery',
          :id => 'safeDepositBoxBurglary',
        },
        {
          :name => 'Safe Deposit Box Securities (Broad)',
          :id => 'safeDepositBoxSecurities',
        },
        {
          :name => 'Office Burglary & Robbery',
          :id => 'officeBurglary',
          :type => {
            'fourPoint' => '4 Point',
            'sevenPoint' => '7 Point',
          },
        },
        {
          :name => 'Store Burglary & Robbery (Seven Point)',
          :id => 'storeBurglary',
        },
        {
          :name => 'Church Theft',
          :id => 'churchTheft',
        },
        {
          :name => 'Misc. Wording',
          :id => 'miscWording',
        },
      ],
    },
    {
      :name => 'Liability',
      :type => [
        {
          :name => 'Commercial General Liability (Occurrence Form)',
          :id => 'commercialGeneralLiability',
        },
        {
          :name => 'Comprehensive General Liability',
          :id => 'comprehensiveGeneralLiability',
        },
        {
          :name => 'Owners’, Landlords’, and Tenants’ Liability',
          :id => 'ownersLandlords',
        },
        {
          :name => 'Tenants’ Legal Liability',
          :id => 'tenantsLegalLiability',
          :type => {
            'broad' => 'Broad Form',
            'limited' => 'Limited',
          },
        },
        {
          :name => 'Non-Owned Automobile Liability (SPF 6)',
          :id => 'nonOwnedAutoLiability',
        },
        {
          :name => 'Worldwide Non-owned Automobile Liability',
          :id => 'WWNonOwnedAuto',
        },
        {
          :name => 'Voluntary Compensation',
          :id => 'VoluntaryComensation',
        },
        {
          :name => 'Professional Liability',
          :id => 'professionalLiability',
        },
        {
          :name => 'Directors’ & Officers Liability',
          :id => 'directorsOfficersLiability',
          :type => {
            'profit' => 'Profit',
            'nonProfit' => 'Non profit',
          },
        },
        {
          :name => 'Employers’ Bodily Injury Liability',
          :id => 'employersBodilyIngury',
        },
        {
          :name => 'Wrap-up Liability',
          :id => 'wrapUPLiability',
        },
        {
          :name => 'Pollution Liability',
          :id => 'pollutionLiability',
        },
        {
          :name => 'Excess Liability',
          :id => 'excessLiability',
        },
        {
          :name => 'Misc. Wording',
          :id => 'miscWording',
        },
      ],
    },
    {
      :name => 'Umbrella',
      :type => [
        {
          :name => 'Umbrella Liability',
          :id => 'umbrellaLiability',
        },
        {
          :name => 'Misc. Wording',
          :id => 'miscWording',
        },
      ],
    },
    {
      :name => 'Machinery Breakdown',
      :type => [
        {
          :name => 'Machinery Breakdown',
          :id => 'machineryBreakdown',
        },
        {
          :name => 'Business Interruption (Actual Loss)',
          :id => 'businessInterruptionAL',
        },
        {
          :name => 'Business Interruption (Loss of Profit)',
          :id => 'businessInterruptionLOP',
        },
        {
          :name => 'Business Interruption (Gross Earnings)',
          :id => 'businessInterruptionGE',
        },
        {
          :name => 'Business Interruption (Rent or Rental Value)',
          :id => 'businessInterruptionRRV',
        },
        {
          :name => 'Business Interruption (Extra Expense)',
          :id => 'businessInterruptionEE',
        },
        {
          :name => 'Misc. Wording',
          :id => 'miscWording',
        },
      ],
    },
    {
      :name => 'Other',
      :type => [
        {
          :name => 'Fees to Substantiate Loss',
          :id => 'feesToSubstantiateLoss',
        },
        {
          :name => 'Glass',
          :id => 'glass',
        },
        {
          :name => 'Additional Insured',
          :id => 'additionalInsured',
        },
        {
          :name => 'Exclusion of Asbestos Related Claims',
          :id => 'execlusionOfAsbestosRelated',
        },
        {
          :name => 'Blanket Machinery Breakdown',
          :id => 'blanketMachinery',
        },
        {
          :name => 'Misc. Wording',
          :id => 'miscWording',
        },
      ],
    },
  ]
%>

<div class="pure-g-r" id="coverageScheduleForm">
  <div class="pure-u-1-5">
    <h2 class="no-top-margin">Category</h2>
    <hr class="soften" />
    <select name="category" data-ng-model="<%= sectionId %>.category.value" size="<%= schedules.count + 1%>"
            data-ng-change="<%= sectionId %>.type = ''" required>
      <option value="">Select a category...</option>
      <% schedules.each do |category| %>
        <option><%= category[:name] %></option>
      <% end %>
    </select>
  </div>
  <div class="pure-u-2-5">
    <h2 class="no-top-margin">Type</h2>
    <hr class="soften" />
    <select data-ng-if="!<%= sectionId %>.category.value" disabled>
      <option>             </option>
    </select>
    <% schedules.each do |category| %>
      <select name="type" data-ng-model="<%= sectionId %>.type.value" data-ng-if="<%= sectionId %>.category.value == '<%= category[:name] %>'" size="<%= category[:type].count + 1 %>" required>
        <option value="">Select a type...</option>
        <% category[:type].each do |type| %>
          <option><%= type[:name] %></option>
        <% end %>
      </select>
    <% end %>
  </div>
  <div class="pure-u-2-5">
    <h2 class="no-top-margin">Values</h2>
    <hr class="soften" />
    <% schedules.each do |category| %>
      <% category[:type].each do |type| %>
        <% if !type[:options].nil? %>
          <%
            optionsMenu = {
              :name => 'Options',
              :id => 'options',
              :type => 'radio',
              :options => type[:options],
            }
           %>
          <div data-ng-if="<%= sectionId %>.type.value == '<%= type[:name] %>'">
            <%= form_field optionsMenu, sectionId %>
          </div>
        <% end %>
        <% if !type[:type].nil? %>
          <%
            typesMenu = {
              :name => 'Types',
              :id => 'subtype',
              :type => 'radio',
              :options => type[:type],
            }
           %>
          <div data-ng-if="<%= sectionId %>.type.value == '<%= type[:name] %>'">
            <%= form_field typesMenu, sectionId %>
          </div>
        <% end %>
      <% end %>
    <% end %>

    <%
      replacementCost = {
        :name => 'Replacement cost',
        :id => 'replacementCost',
        :type => 'currency',
        :placeholder => '$ CAN (ex. 111.11)',
        :if => "$" + sectionId + ".options.value == \"building\" || " + sectionId + ".options.value == \"equipment\"",
      }
     %>
    <%= form_field replacementCost, sectionId %>

    <%
      coinsurance = {
        :name => 'Coinsurance',
        :id => 'coinsurance',
        :type => 'text',
        :placeholder => '(ex. 90%)',
        :prefill => {
          :auto => '90%',
        },
      }
     %>
    <%= form_field coinsurance, sectionId %>
    <%
      deductible = {
        :name => 'Deductible',
        :id => 'deductible',
        :type => 'currency',
        :placeholder => '$ CAN (ex. 111.11)',
      }
     %>
    <%= form_field deductible, sectionId %>
    <%
      limit = {
        :name => 'Limit',
        :id => 'limit',
        :type => 'currency',
        :placeholder => '$ CAN (ex. 111.11)',
        :prefill => {
          :calc => 'coverageSchedules.replacementCost.value',
        },
      }
     %>
    <%= form_field limit, sectionId %>
  </div>
</div>
