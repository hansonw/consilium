<% paths = paths.delete_if { |k, v| k.nil? } %>

<div class="breadcrumbs">
  <% paths.each_with_index do |path, index| %>
    <span <%= (match = path[0].match(/{{(.*)}}/)) && raw("data-ng-show='#{h match[1]}'") %>>
      <%= link_to path[0], '', :data => path[1].is_a?(Hash) ? path[1] : {:ng_href => path[1]},
          :class => index == paths.length - 1 ? 'current' : '' %>
      <% if index != paths.length - 1 %>
        <span class="divider">&gt;</span>
      <% end %>
    </span>
  <% end %>
</div>
